{"version":3,"sources":["utils/config.js","components/IconFont.js","store/action.js","components/Search.js","components/Header.js"],"names":["config","douban","basicUrl","tmdb","castUrl","searchUrl","backdropUrl","bgUrl","apiKey","genres_en","id","name","genres_cn","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","IconFont","_ref","a","createElement","className","aria-hidden","xlinkHref","protoType","PropTypes","string","isRequired","d","__webpack_exports__","changeLang","fetchData","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","_constants__WEBPACK_IMPORTED_MODULE_1__","_utils_config__WEBPACK_IMPORTED_MODULE_2__","getNowShowingData","res","type","constants","payload","nowShowingArr","getUpcomingData","upcomingArr","language","fetchingType","dispatch","getState","api","axios","get","then","results","data","catch","err","error","Search","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","value","props","setState","showSearchMenu","searchResult","console","log","onKeyDown","e","keyCode","path","refs","input","history","push","handleInput","target","handleClick","debounce","state","focused","_this2","document","addEventListener","_this3","searchBarClassName","react_default","ref","onChange","onFocus","onBlur","placeholder","length","map","movie","index","key","onClick","react_router_dom","to","title","Component","connect","withRouter","es_radio","Group","defaultValue","buttonStyle","Button","components_Search"],"mappings":"2FA0KeA,IA1KA,CACbC,OAAQ,CACNC,SAAU,oCAEZC,KAAM,CACJD,SAAU,sCACVE,QAAS,uCACTC,UAAW,4CACXC,YAAa,iDACbC,MAAO,uCACPC,OAAQ,mCACRC,UAAW,CACT,CACEC,GAAI,GACJC,KAAM,UAER,CACED,GAAI,GACJC,KAAM,aAER,CACED,GAAI,GACJC,KAAM,aAER,CACED,GAAI,GACJC,KAAM,UAER,CACED,GAAI,GACJC,KAAM,SAER,CACED,GAAI,GACJC,KAAM,eAER,CACED,GAAI,GACJC,KAAM,SAER,CACED,GAAI,MACJC,KAAM,UAER,CACED,GAAI,GACJC,KAAM,WAER,CACED,GAAI,GACJC,KAAM,WAER,CACED,GAAI,GACJC,KAAM,UAER,CACED,GAAI,MACJC,KAAM,SAER,CACED,GAAI,KACJC,KAAM,WAER,CACED,GAAI,MACJC,KAAM,WAER,CACED,GAAI,IACJC,KAAM,mBAER,CACED,GAAI,MACJC,KAAM,YAER,CACED,GAAI,GACJC,KAAM,YAER,CACED,GAAI,MACJC,KAAM,OAER,CACED,GAAI,GACJC,KAAM,YAGVC,UAAY,CACV,CACEF,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,KACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,IACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,4BAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,qDCpKhB,IAAAE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","file":"static/js/12.24596daf.chunk.js","sourcesContent":["const config = {\r\n  douban: {\r\n    basicUrl: 'https://api.douban.com/v2/movie/',\r\n  },\r\n  tmdb: {\r\n    basicUrl: 'https://api.themoviedb.org/3/movie/',\r\n    castUrl: 'https://api.themoviedb.org/3/person/',\r\n    searchUrl: 'https://api.themoviedb.org/3/search/movie',\r\n    backdropUrl: 'https://image.tmdb.org/t/p/w1400_and_h450_face',\r\n    bgUrl: 'https://image.tmdb.org/t/p/original/',\r\n    apiKey: 'bb3f5acf00144cfacd624c940807a5c4',\r\n    genres_en: [\r\n      {\r\n        id: 28,\r\n        name: \"Action\"\r\n      },\r\n      {\r\n        id: 12,\r\n        name: \"Adventure\"\r\n      },\r\n      {\r\n        id: 16,\r\n        name: \"Animation\"\r\n      },\r\n      {\r\n        id: 35,\r\n        name: \"Comedy\"\r\n      },\r\n      {\r\n        id: 80,\r\n        name: \"Crime\"\r\n      },\r\n      {\r\n        id: 99,\r\n        name: \"Documentary\"\r\n      },\r\n      {\r\n        id: 18,\r\n        name: \"Drama\"\r\n      },\r\n      {\r\n        id: 10751,\r\n        name: \"Family\"\r\n      },\r\n      {\r\n        id: 14,\r\n        name: \"Fantasy\"\r\n      },\r\n      {\r\n        id: 36,\r\n        name: \"History\"\r\n      },\r\n      {\r\n        id: 27,\r\n        name: \"Horror\"\r\n      },\r\n      {\r\n        id: 10402,\r\n        name: \"Music\"\r\n      },\r\n      {\r\n        id: 9648,\r\n        name: \"Mystery\"\r\n      },\r\n      {\r\n        id: 10749,\r\n        name: \"Romance\"\r\n      },\r\n      {\r\n        id: 878,\r\n        name: \"Science Fiction\"\r\n      },\r\n      {\r\n        id: 10770,\r\n        name: \"TV Movie\"\r\n      },\r\n      {\r\n        id: 53,\r\n        name: \"Thriller\"\r\n      },\r\n      {\r\n        id: 10752,\r\n        name: \"War\"\r\n      },\r\n      {\r\n        id: 37,\r\n        name: \"Western\"\r\n      }\r\n    ],\r\n    genres_cn:  [\r\n      {\r\n        \"id\": 28,\r\n        \"name\": \"动作\"\r\n      },\r\n      {\r\n        \"id\": 12,\r\n        \"name\": \"冒险\"\r\n      },\r\n      {\r\n        \"id\": 16,\r\n        \"name\": \"动画\"\r\n      },\r\n      {\r\n        \"id\": 35,\r\n        \"name\": \"喜剧\"\r\n      },\r\n      {\r\n        \"id\": 80,\r\n        \"name\": \"犯罪\"\r\n      },\r\n      {\r\n        \"id\": 99,\r\n        \"name\": \"纪录\"\r\n      },\r\n      {\r\n        \"id\": 18,\r\n        \"name\": \"剧情\"\r\n      },\r\n      {\r\n        \"id\": 10751,\r\n        \"name\": \"家庭\"\r\n      },\r\n      {\r\n        \"id\": 14,\r\n        \"name\": \"奇幻\"\r\n      },\r\n      {\r\n        \"id\": 36,\r\n        \"name\": \"历史\"\r\n      },\r\n      {\r\n        \"id\": 27,\r\n        \"name\": \"恐怖\"\r\n      },\r\n      {\r\n        \"id\": 10402,\r\n        \"name\": \"音乐\"\r\n      },\r\n      {\r\n        \"id\": 9648,\r\n        \"name\": \"悬疑\"\r\n      },\r\n      {\r\n        \"id\": 10749,\r\n        \"name\": \"爱情\"\r\n      },\r\n      {\r\n        \"id\": 878,\r\n        \"name\": \"科幻\"\r\n      },\r\n      {\r\n        \"id\": 10770,\r\n        \"name\": \"电视电影\"\r\n      },\r\n      {\r\n        \"id\": 53,\r\n        \"name\": \"惊悚\"\r\n      },\r\n      {\r\n        \"id\": 10752,\r\n        \"name\": \"战争\"\r\n      },\r\n      {\r\n        \"id\": 37,\r\n        \"name\": \"西部\"\r\n      }\r\n    ]\r\n  }\r\n}  \r\n\r\nexport default config","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\n\r\nconst IconFont = ({ name }) => {\r\n\r\n  return (\r\n    <svg className={\"icon-font \" +name} aria-hidden=\"true\">\r\n        <use xlinkHref={ '#icon-' + name } />\r\n    </svg>\r\n  )\r\n}\r\n\r\nIconFont.protoType = {\r\n  name: PropTypes.string.isRequired\r\n}\r\n\r\n\r\nexport default IconFont\r\n\r\n\r\n","import axios from 'axios'\r\nimport * as constants from './constants'\r\nimport config from '../utils/config'\r\n\r\nconst getNowShowingData = (res) => ({\r\n  type: constants.FETCH_NOWSHOWING_COMPLETED,\r\n  payload: {\r\n    nowShowingArr: res\r\n  }\r\n})\r\n\r\nconst getUpcomingData = (res) => ({\r\n  type: constants.FETCH_UPCOMING_COMPLETED,\r\n  payload: {\r\n    upcomingArr: res\r\n  }\r\n})\r\n\r\nexport const changeLang = (language) => ({\r\n  type: constants.CHANGE_LANG,\r\n  language\r\n})\r\n\r\nexport function fetchData(fetchingType, language) {\r\n  return (dispatch, getState) => {\r\n    if (fetchingType !== getState().type) {\r\n       dispatch({\r\n        type: constants.CHANGE_TYPE,\r\n        fetchingType\r\n      })\r\n    }\r\n    \r\n    dispatch({\r\n      type: constants.FETCH_STARTED\r\n    });\r\n\r\n    const api = config.tmdb.basicUrl + fetchingType +'?api_key=' + config.tmdb.apiKey + '&language='+ language +'&page=1&region=AU'\r\n    const type = fetchingType === 'now_playing' \r\n\r\n    axios.get(api)\r\n      .then(res => {\r\n        const results = res.data.results;\r\n        if (type) {\r\n          return dispatch(getNowShowingData(results))\r\n        } else {\r\n          return dispatch(getUpcomingData(results))\r\n        }\r\n      })\r\n      .catch(err => {\r\n        return dispatch({\r\n          type: constants.FETCH_FAILED,\r\n          error: true,\r\n          payload: err\r\n        });\r\n      })\r\n    \r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport IconFont from './IconFont'\r\nimport debounce from 'lodash.debounce'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux';\r\nimport config from '../utils/config'\r\n\r\nclass Search extends Component {\r\n  constructor() {\r\n    super()\r\n    this.fetchData = debounce(this.fetchData, 300)\r\n    this.state = { focused: false, searchResult: [], showSearchMenu: false}\r\n  }\r\n\r\n  componentDidMount () {\r\n    document.addEventListener('click', ()=> {this.setState({ showSearchMenu: false})})\r\n  }\r\n\r\n  fetchData = (value) => {\r\n    const api = config.tmdb.searchUrl + '?query='+ value +'&api_key=' + config.tmdb.apiKey + '&language=' + this.props.language +'&page=1'\r\n    if (!value) return this.setState({ showSearchMenu: false })\r\n    this.setState({ showSearchMenu: true })\r\n    axios.get(api)\r\n      .then((res) => {\r\n        this.setState({ searchResult: res.data.results})\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  onKeyDown = e => {\r\n    if (e.keyCode === 13) {\r\n      let path = '/search/' + this.refs.input.value;\r\n      this.refs.input.value = '';\r\n      this.props.history.push(path);\r\n      this.setState({ searchResult: [], showSearchMenu: false})\r\n    }\r\n  };\r\n\r\n  handleInput = (e) => {\r\n    this.fetchData(e.target.value)\r\n  }\r\n\r\n  handleClick = (e) => {\r\n    this.refs.input.value = ''\r\n    this.setState({\r\n      searchResult:[]\r\n    })\r\n  }\r\n\r\n\r\n  render () {\r\n    let searchBarClassName = this.state.focused\r\n      ? 'search-bar focused'\r\n      : 'search-bar';\r\n\r\n    return (\r\n      <div className={searchBarClassName}>\r\n        <div className=\"search-icon\">\r\n          <IconFont name={'search'} />\r\n        </div>\r\n        <input\r\n          className=\"search-input\"\r\n          ref=\"input\"\r\n          type=\"text\"\r\n          onKeyDown={this.onKeyDown}\r\n          onChange={this.handleInput}\r\n          onFocus={() => this.setState({ focused: true })}\r\n          onBlur={() => this.setState({ focused: false })}\r\n          placeholder=\"Search for a movie...\"\r\n        />\r\n        {\r\n          (this.state.showSearchMenu && this.state.searchResult.length >= 0)? \r\n          <ul className=\"dropdown-menu \">\r\n            {\r\n              this.state.searchResult.length !== 0 ?\r\n                this.state.searchResult.map((movie, index) => {\r\n                  return index <= 5 ? (\r\n                    <li key={movie.id} className=\"suggestion\" onClick={this.handleClick}>\r\n                      <Link to={'/detail/' + movie.id}>\r\n                        {movie.title}\r\n                      </Link>\r\n                    </li>\r\n                  ) : null\r\n                }) : <li>No search result</li>\r\n            }\r\n          </ul> : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    language: state.language\r\n  }\r\n}\r\n\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(withRouter(Search));","import React from 'react'\r\nimport IconFont from './IconFont'\r\nimport Search from './Search'\r\nimport { Link } from 'react-router-dom'\r\nimport { Radio } from 'antd';\r\nimport { connect } from 'react-redux';\r\nimport { changeLang } from '../store/action'\r\n\r\nconst Header = (props) => {\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"language\">\r\n        <Radio.Group onChange={(e) => props.changeLang(e.target.value)} defaultValue={props.language} buttonStyle=\"solid\">\r\n          <Radio.Button value=\"en-AU\">EN</Radio.Button>\r\n          <Radio.Button value=\"zh-CN\">CN</Radio.Button>\r\n        </Radio.Group>\r\n      </div>\r\n      <Link to='/' >\r\n        <IconFont name={'star'} className='movie-title'/>\r\n      </Link>\r\n      <div className=\"search-wrapper\">\r\n        <Search />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    language: state.language\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    changeLang: (language) => dispatch(changeLang(language))\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Header);"],"sourceRoot":""}